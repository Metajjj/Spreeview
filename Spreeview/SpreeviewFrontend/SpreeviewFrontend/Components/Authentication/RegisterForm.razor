@using System.ComponentModel.DataAnnotations
@using RecordShop.Frontend.Client.Identity.Models
<EditForm Model="_input" method="post" OnValidSubmit="Submit"
          FormName="register" Context="editform_context">
    <DataAnnotationsValidator />
    <h2>Register as a new user.</h2>
    <hr />
    <div class="form-floating mb-3">
        <InputText @bind-Value="_input.Email"
                   id="Input.Email"
                   class="form-control"
                   autocomplete="username"
                   aria-required="true"
                   placeholder="name@example.com" />
        <label for="Input.Email" class="form-label">
            Email
        </label>
        <ValidationMessage For="() => _input.Email"
                           class="text-danger" />
    </div>
    <div class="form-floating mb-3">
        <InputText type="password"
                   @bind-Value="_input.Password"
                   id="Input.Password"
                   class="form-control"
                   autocomplete="new-password"
                   aria-required="true"
                   placeholder="password" />
        <label for="Input.Password" class="form-label">
            Password
        </label>
        <ValidationMessage For="() => _input.Password"
                           class="text-danger" />
    </div>
    <div class="form-floating mb-3">
        <InputText type="password"
                   @bind-Value="_input.ConfirmPassword"
                   id="Input.ConfirmPassword"
                   class="form-control"
                   autocomplete="new-password"
                   aria-required="true"
                   placeholder="confirm password" />
        <label for="Input.ConfirmPassword" class="form-label">
            Confirm Password
        </label>
        <ValidationMessage For="() => _input.ConfirmPassword"
                           class="text-danger" />
    </div>
    <div>
        <button type="submit" class="w-100 btn btn-lg btn-primary">
            Register
        </button>
    </div>
</EditForm>

@code
{
    [SupplyParameterFromForm]
    private RegisterFormModel _input { get; set; } = new();
    
    [Parameter]
    public EventCallback<RegisterFormModel> OnSubmit { get; set; }

    private async Task Submit()
    {
        await OnSubmit.InvokeAsync(_input);
    }
}
